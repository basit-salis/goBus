
<%# busData %>
<%# let data = JSON.parse(busData) %>

<div class="admin-main">

    <div class="row">
      <%- include('admin_sidebar') %>
      <div class=" row test home_row">
      <%- include('dash_view') %>
        
        <div class="main-table">
            <div class="user-table">
        
                <table class="table table-striped table-bordered bg-light shadow">
                    <tbody>
                    <tr>
                    
                        <th colspan="2" class="text-center">
                            bus catalogg
                            <!-- Button trigger modal -->
                           <button type="button" class="btn btn-primary mx-2 btn-sm" data-toggle="modal" data-target="#modelId">
                               <i class="fa fa-plus px-1"></i>new schedule
                              </button>
                           
                            <!-- Modal -->
                            <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
                                aria-hidden="true">
                                <div class="modal-dialog modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">new schedule</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form action="/admin/schedule/:id" method="POST" >
                                                <div
                                                    class="form-group  d-flex flex-column justify-content-center align-items-center  d-flex flex-column align-items-start my-3 w-100 ">
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="bus_type">bus type</label>
                                                        <input type="text" class="form-control  " name="bus__type"
                                                            id="bus__type" placeholder="bus type">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="bus_name">bus name</label>
                                                        <input type="text" class="form-control  " name="bus__name"
                                                            id="bus__name" placeholder="registration number">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="plate_number">plate number</label>
                                                        <input type="text" class="form-control  " name="bus__plate"
                                                            id="bus__plate" placeholder="registration number">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="registration_number">registration number</label>
                                                        <input type="text" class="form-control  " name="bus__RegNumber"
                                                            id="bus__RegNumber" placeholder="bud number">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="seats_number">seats number</label>
                                                        <input type="text" class="form-control  " name="bus__NumSeats"
                                                            id="bus__NumSeats" placeholder="total number of seats">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="start_point">start point</label>
                                                        <input type="text" class="form-control  " name="bus__startPoint"
                                                            id="bus__startPoint" placeholder="total number of seats">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="start_time">start time</label>
                                                        <input type="text" class="form-control  " name="bus__startTime"
                                                            id="bus__startTime" placeholder="total number of seats">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="drop_point">drop point</label>
                                                        <input type="text" class="form-control  " name="bus__dropPoint"
                                                            id="bus__dropPoint" placeholder="total number of seats">
                                                    </div>
        
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="drop_time">drop time</label>
                                                        <input type="text" class="form-control  " name="bus__dropTime"
                                                            id="bus__dropTime" placeholder="total number of seats">
                                                    </div>
                                                    
                                                    <div class="form__item  d-flex flex-column align-items-start my-3 w-100">
                                                        <label for="travel_date">travel date</label>
                                                        <input type="text" class="form-control  " name="bus__travelDate"
                                                            id="bus__dropTime" placeholder="total number of seats">
                                                    </div>
        
        
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary" id="save__bus buses">Save</button>
                                                </div>
                                            </form>
                                        </div>
        
                                    </div>
                                </div>
                            </div>
                        </th>
                        <th colspan="8">
                            <div class="input-group-prepend">
                                <input type="text" class="form-control rounded-0 rounded-right" placeholder="mm/dd/yyyy">
                                <button class="btn btn-secondary"><i class="fa fa-calendar"></i></button>
                            </div>
                        </th>
        
                    </tr>
                    <tr>
                        <th>bus type</th>
                        <th>bus reg-number</th>
                        <th>max seats</th>
                        <th>start point</th>
                        <th>start time</th>
                        <th>drop point</th>
                        <th>drop time</th>
                        <th>travel date</th>
                        <th>trip id </th>
                        <th>action</th>
                    </tr>
                       
                        <% let data = JSON.stringify(DATA) %>
                        <% DATA.forEach(element => {%>
                         <% let type = element.type %>
                        <% let trip_id = element.trip_id %>
                        <% let Cnumber = element.Cnumber %>
                        <% let RegNum = element.RegNum %>
                        <% let NumberSeats = element.NumberSeats %>
                        <% let start_point = element.start_point %>
                        <% let start_time = element.start_time %>
                        <% let drop_point = element.drop_point %>
                        <% let drop_time = element.drop_time %>
                        <% let travel_date = element.travel_date %>  
                       <tr id="<%= trip_id %>">
                            <td><%= type %></td>
                            <td><%= RegNum %></td>
                            <td><%= NumberSeats %></td>
                            <td><%= start_point %></td>
                            <td><%= start_time %></td>
                            <td><%= drop_point %></td>
                            <td><%= drop_time %></td>
                            <td><%= travel_date %></td>
                            <td><%= trip_id %></td>
                            <td>
                                <button class="btn btn-primary"><a href="/admin/bus" style="color: #fff;">view</a> </button>
                                <button class="btn btn-success">edit</button>
                                <button class="btn btn-danger del__btn" id="<%= trip_id %>">
                                <a href="schedule/:<%= trip_id %>">delete</a>
                                </button>
                                
                            </td>
                        </tr>
                      
                        <%})%>
                   
                    </tbody>
        
                </table>
            </div>
        </div>
      </div>
  
    </div>
  
  </div>
